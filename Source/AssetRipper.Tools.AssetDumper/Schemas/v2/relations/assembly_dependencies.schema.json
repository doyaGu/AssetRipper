{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.assetripper.dev/assetdump/v2/relations/assembly_dependencies.schema.json",
  "title": "AssetDump Assembly Dependency Relations",
  "description": "Assembly-to-assembly dependency references for dependency graph analysis with enhanced .NET metadata.",
  "$ref": "#/$defs/AssemblyDependencyRecord",
  "$defs": {
    "AssemblyDependencyRecord": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "domain",
        "sourceAssembly",
        "targetName",
        "isResolved"
      ],
      "properties": {
        "domain": {
          "type": "string",
          "const": "assembly_dependencies"
        },
        "sourceAssembly": {
          "type": "string",
          "description": "Source assembly GUID",
          "pattern": "^[0-9A-F]{32}$"
        },
        "sourceModule": {
          "type": "string",
          "description": "Name of the module declaring this reference (typically the main module of the source assembly)."
        },
        "targetAssembly": {
          "anyOf": [
            {
              "type": "string",
              "pattern": "^[0-9A-F]{32}$"
            },
            {
              "type": "null"
            }
          ],
          "description": "Target assembly GUID; null if dependency was not resolved."
        },
        "targetName": {
          "type": "string",
          "description": "Target assembly name as declared in the AssemblyReference.",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "description": "Required assembly version in .NET format (Major.Minor.Build.Revision).",
          "pattern": "^\\d+\\.\\d+\\.\\d+\\.\\d+$"
        },
        "publicKeyToken": {
          "type": "string",
          "description": "Public key token for strong-named assemblies (8-byte hex string). Null for non-strong-named assemblies.",
          "pattern": "^[0-9a-f]{16}$"
        },
        "culture": {
          "type": "string",
          "description": "Culture information (e.g., 'neutral', 'en-US'). Empty or 'neutral' for culture-neutral assemblies."
        },
        "isResolved": {
          "type": "boolean",
          "description": "Whether the dependency was successfully resolved to a known assembly."
        },
        "dependencyType": {
          "type": "string",
          "enum": [
            "direct",
            "framework",
            "plugin",
            "unknown"
          ],
          "description": "Type of dependency: 'direct' (user assembly), 'framework' (System.*/mscorlib), 'plugin' (Unity plugins), 'unknown' (unclassified)."
        },
        "isFrameworkAssembly": {
          "type": "boolean",
          "description": "Whether target is a .NET framework/reference assembly (System.*, mscorlib, or in ReferenceAssemblies dictionary)."
        },
        "failureReason": {
          "type": "string",
          "description": "Human-readable reason why dependency resolution failed (present only if isResolved is false)."
        }
      }
    }
  }
}