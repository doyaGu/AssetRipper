{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.assetripper.dev/assetdump/v2/facts/collections.schema.json",
  "title": "AssetDump v2 Collections Facts",
  "description": "Per-collection metadata describing Unity SerializedFiles and embedded built-in resources.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "collectionId",
    "name",
    "platform",
    "unityVersion",
    "endian",
    "bundle",
    "dependencies",
    "assetCount"
  ],
  "properties": {
    "collectionId": {
      "$ref": "https://schemas.assetripper.dev/assetdump/v2/core.schema.json#/$defs/CollectionID"
    },
    "name": {
      "type": "string",
      "description": "Primary filename (e.g., sharedassets1.assets)."
    },
    "friendlyName": {
      "type": "string",
      "description": "Human-friendly scene identifier derived from the project-relative path (drops the leading 'Assets/' prefix, strips '.unity', replaces underscores/hyphens with spaces)."
    },
    "bundleName": {
      "type": "string",
      "description": "Bundle name when sourced from an AssetBundle."
    },
    "filePath": {
      "type": "string",
      "description": "Relative file path for the serialized collection on disk."
    },
    "platform": {
      "type": "string",
      "description": "Unity build target/platform string."
    },
    "unityVersion": {
      "type": "string",
      "description": "Unity player/editor version that produced the SerializedFile."
    },
    "formatVersion": {
      "type": "integer",
      "minimum": 0,
      "description": "SerializedFile header format version controlling table layout and offset width."
    },
    "endian": {
      "type": "string",
      "enum": [
        "LittleEndian",
        "BigEndian"
      ]
    },
    "flagsRaw": {
      "type": "string",
      "description": "Bitflag string describing Unity SerializedFile flags as recorded on disk."
    },
    "flags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Optional flag set derived from Unity SerializedFile header."
    },
    "isSceneCollection": {
      "type": "boolean",
      "description": "True when the collection originates from a Unity scene."
    },
    "bundle": {
      "$ref": "https://schemas.assetripper.dev/assetdump/v2/core.schema.json#BundleRef",
      "description": "Reference to the parent Bundle containing this collection."
    },
    "scene": {
      "$ref": "https://schemas.assetripper.dev/assetdump/v2/core.schema.json#SceneRef",
      "description": "Reference to the Scene if this collection is part of one."
    },
    "collectionIndex": {
      "type": "integer",
      "minimum": 0,
      "description": "Index of this collection within its parent bundle's collection list."
    },
    "dependencies": {
      "type": "array",
      "items": {
        "$ref": "https://schemas.assetripper.dev/assetdump/v2/core.schema.json#/$defs/CollectionID"
      },
      "description": "Ordered list of dependency CollectionIDs (index 0 is self)."
    },
    "dependencyIndices": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "minimum": 0
      },
      "description": "Map from dependency CollectionID to its index in dependencies array."
    },
    "assetCount": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of assets in this collection."
    },
    "source": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "uri": {
          "type": "string",
          "description": "Optional URI describing the physical source of the collection."
        },
        "offset": {
          "type": "integer",
          "minimum": 0
        },
        "size": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "unity": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "builtInClassification": {
          "type": "string",
          "enum": [
            "BUILTIN-EXTRA",
            "BUILTIN-DEFAULT",
            "BUILTIN-EDITOR"
          ],
          "description": "Stable identifier assigned to Unity built-in resources."
        }
      }
    }
  }
}
