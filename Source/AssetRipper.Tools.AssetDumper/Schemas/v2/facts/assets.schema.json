{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.assetripper.dev/assetdump/v2/facts/assets.schema.json",
  "title": "AssetDump v2 Asset Facts",
  "description": "Per-asset facts capturing identity, class information and serialized data slices.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "domain",
    "pk",
    "classKey"
  ],
  "properties": {
    "domain": {
      "type": "string",
      "const": "assets"
    },
    "pk": {
      "$ref": "../core.schema.json#/$defs/AssetPK"
    },
    "classKey": {
      "type": "integer",
      "description": "Join key into facts/types.ndjson for efficient type information lookup."
    },
    "className": {
      "type": "string",
      "description": "Unity class name (e.g., GameObject, MonoBehaviour, Texture2D). Provides human-readable type information."
    },
    "name": {
      "type": "string",
      "description": "Best-effort asset name (Unity m_Name or derived from INamed interface)."
    },
    "originalPath": {
      "type": "string",
      "description": "Original path of the asset in the Unity project (e.g., Assets/Textures/logo.png)."
    },
    "originalDirectory": {
      "type": "string",
      "description": "Original directory path without filename."
    },
    "originalName": {
      "type": "string",
      "description": "Original filename without extension."
    },
    "originalExtension": {
      "type": "string",
      "description": "Original file extension (e.g., .png, .fbx)."
    },
    "assetBundleName": {
      "type": "string",
      "description": "Name of the asset bundle containing this asset, if applicable."
    },
    "hierarchy": {
      "$ref": "../core.schema.json#HierarchyPath",
      "description": "Complete hierarchical path from root bundle to this asset."
    },
    "collectionName": {
      "type": "string",
      "description": "Name of the containing collection (for readability)."
    },
    "bundleName": {
      "type": "string",
      "description": "Name of the parent bundle (for readability)."
    },
    "sceneName": {
      "type": "string",
      "description": "Name of the scene if this asset belongs to one."
    },
    "unity": {
      "type": "object",
      "description": "Unity serialization metadata; all fields optional for version flexibility.",
      "additionalProperties": false,
      "properties": {
        "classId": {
          "type": "integer",
          "description": "Unity ClassID (e.g., 1 = GameObject, 114 = MonoBehaviour). Native type identifier."
        },
        "typeId": {
          "type": "integer",
          "description": "SerializedType.TypeID when available. Used in SerializedFile format."
        },
        "serializedTypeIndex": {
          "type": "integer",
          "description": "Index into the SerializedFile's type tree array."
        },
        "scriptTypeIndex": {
          "type": "integer",
          "description": "Script type index for MonoBehaviour assets. Links to script metadata."
        },
        "isStripped": {
          "type": "boolean",
          "description": "True if the asset's type information was stripped during build."
        },
        "serializedVersion": {
          "type": "integer",
          "description": "SerializedVersion of the asset type. Used for handling format changes across Unity versions."
        }
      }
    },
    "data": {
      "description": "Serialized Unity object payload emitted inline as JSON. Null for unreadable assets (UnreadableObject, UnknownObject).",
      "type": [
        "object",
        "array",
        "string",
        "number",
        "boolean",
        "null"
      ]
    },
    "byteStart": {
      "type": "integer",
      "minimum": 0,
      "description": "Byte offset into the backing serialized data stream where this object's data begins. Present when slice metadata is available."
    },
    "byteSize": {
      "type": "integer",
      "minimum": 0,
      "description": "Size in bytes of this object's serialized data slice. Present when slice metadata is available."
    },
    "hash": {
      "type": "string",
      "description": "Optional content hash (e.g., sha1:<hex>) for deduplication and integrity verification."
    }
  }
}